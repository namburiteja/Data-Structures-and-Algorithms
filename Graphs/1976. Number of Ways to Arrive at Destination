class Solution {
    static class Pair{
        int node;
        long dist;
        Pair(int a,long b){
            node = a;
            dist = b;
        }
    }
    public int countPaths(int n, int[][] roads) {
        List<List<Pair>> adj = new ArrayList<>();
        for(int i=0;i<n;i++) adj.add(new ArrayList<>());
        for(int i=0;i<roads.length;i++){
            adj.get(roads[i][0]).add(new Pair(roads[i][1],roads[i][2]));
            adj.get(roads[i][1]).add(new Pair(roads[i][0],roads[i][2]));
        }
        PriorityQueue<Pair> pq = new PriorityQueue<>((c,d)-> Long.compare(c.dist,d.dist));
        long[] dist = new long[n];
        int[] ways = new int[n];
        for(int i=0;i<n;i++){
            dist[i] = Long.MAX_VALUE;
        }
        pq.add(new Pair(0,0));
        dist[0] = 0;
        ways[0] = 1;
        int mod = 1_000_000_007;
        while(!pq.isEmpty()){
            Pair xx = pq.poll();
            int node = xx.node;
            long distt = xx.dist;
            for(Pair i:adj.get(node)){
                int newNode = i.node;
                long newDist = i.dist;
                long sui = distt+newDist;
                if(sui < dist[newNode]){
                    dist[newNode] = sui;
                    pq.add(new Pair(newNode,sui));
                    ways[newNode] = ways[node];
                }else if(sui == dist[newNode]){
                    ways[newNode] = (ways[node] + ways[newNode])%mod;
                }
            }
        }
        return ways[n-1];
    }
}
